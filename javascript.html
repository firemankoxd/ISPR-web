<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="utf-8">
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./img/krisicon.png">
    <meta name="author" content="Filip Kalus">
    <title>Vizualizácia | Filip Kalus</title>
    <link rel="stylesheet" href="./style.css">
    <script src="jquery-2.0.2.min.js"></script>
    <script src="https://kit.fontawesome.com/0797fc1598.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="img">
          <a href="http://kris.uniza.sk/" target="_blank"><img src="./img/logoV2.png"></a>
        </div>
        <div class="nadpis">
          <h1>Web server pre PLC od spoločnosti Siemens</h1>
          <h4>Návod na tvorbu vizualizačného rozhrania k pracovisku pomocou PLC Web servera</h4>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="index.html"><i class="fas fa-home"></i>Domov</a></li>
          <li><a href="about.html"><i class="fas fa-question-circle"></i>O projekte</a></li>
          <li><a href="tiaportal.html"><i class="fas fa-chalkboard-teacher"></i>TIA Portal</a></li>
          <li><a href="html.html"><i class="fab fa-html5"></i>HTML</a></li>
          <li><a class="active" href="javascript.html"><i class="fab fa-js-square"></i>JavaScript</a></li>
          <li><a href="contact.html"><i class="fas fa-address-book"></i>Kontakt</a></li>
        </ul>
      </nav>
    </header>
    <div class="article">
      <h4>1.) Pridanie funkcie na prihlásenie</h4>
      <div class="text">
        <p>
          Po pridaní HTML elementov pre prihlasovanie na stránke HTML už len ostáva doplniť prihlasovaciu funkciu.
          Siemens ju uvádza v spomenutom príklade na predošlej stránke a nie je vôbec potreba ju nijako upravovať.
          Funkcia vyzerá nasledovne:
        </p>
        <pre id="code-insert"><code>function loginCheck() {
  var iFrameElement = document.getElementById('WebserverIFrame');
  var loginForm = iFrameElement.contentWindow.document.getElementById('loginForm'); <span id="code-comment">//S7-1200 FW4.0</span>
  if (loginForm == null) {
      loginForm = iFrameElement.contentWindow.document.getElementById('Login_Area_Form'); <span id="code-comment">//S7-1200 FW2.2 and S7-1500 FW1.5</span>
  }
  if(loginForm) {
      loginForm.setAttribute("data-ajax", "false");
      document.getElementById('loginBox').innerHTML = loginForm.parentNode.innerHTML;
      document.getElementsByName("Redirection")[0]["value"] = window.location.href.split("?")[0];
      console.log("You are not logged in!");
  }

  var logoutForm = iFrameElement.contentWindow.document.getElementById('logoutForm'); <span id="code-comment">//S7-1200 FW4.0</span>
  if(logoutForm == null) {
      logoutForm = iFrameElement.contentWindow.document.getElementById('logout_form'); <span id="code-comment">//S7-1200 FW2.2</span>
  }
  if(logoutForm == null) {
      logoutForm = iFrameElement.contentWindow.document.getElementById('Logout_Area_Form'); <span id="code-comment">//S7-1500 FW1.5</span>
  }
  if(logoutForm) {
      logoutForm.setAttribute("data-ajax", "false");
      document.getElementById('loginBox').innerHTML = logoutForm.parentNode.innerHTML;
      document.getElementsByName("Redirection")[0]["value"] = window.location.href.split("?")[0];
      console.log("Login successful!");
  }
}</code></pre>
        <p>
          Po pridaní tejto funkcie sa na stránke objaví prihlasovacie okno, cez je možné sa prihlásiť pomocou konta vytvoreného v programe TIA Portal.
        </p>
      </div>
    </div>
    <div class="article">
      <h4>2.) No</h4>
    </div>
    <footer>
      <p>Filip Kalus, 2020/2021</p>
    </footer>
  </body>
</html>
